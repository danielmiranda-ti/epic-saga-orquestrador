| Etapa  | Origem       | Destino      | Tipo de mensagem                      | **Tópico**                                                                                   | Ação principal                                                                                                              |
| ------ | ------------ | ------------ | ------------------------------------- | -------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
| **1**  | HTTP         | Orchestrator | —                                     | —                                                                                            | Inicia a saga (recebe payload, cria o registro e define a primeira etapa — *Seller*).                                       |
| **2**  | Orchestrator | Seller       | **Command Register**                  | `saga-epic-seller-command-register`                                                          | Envia comando para cadastrar o vendedor.                                                                                    |
| **3a** | Seller       | Orchestrator | **Event Success**                     | `saga-epic-seller-event-success`                                                             | Retorna sucesso no cadastro do vendedor → Orchestrator marca a etapa do *Seller* como **CONCLUÍDA** e inicia etapa *Store*. |
| **3b** | Seller       | Orchestrator | **Event Failed**                      | `saga-epic-seller-event-failed`                                                              | Retorna falha no cadastro do vendedor → Orchestrator marca etapa e saga como **FALHA** e inicia compensação.                |
| **3c** | Orchestrator | Seller       | **Command Compensate**                | `saga-epic-seller-command-compensate`                                                        | Envia comando para desfazer o cadastro do vendedor (compensação).                                                           |
| **3d** | Seller       | Orchestrator | **Event Compensation Success/Failed** | `saga-epic-seller-event-compensation-success` / `saga-epic-seller-event-compensation-failed` | Retorna resultado da compensação do *Seller*.                                                                               |


| Etapa  | Origem       | Destino      | Tipo de mensagem                      | **Tópico**                                                                                 | Ação principal                                                                                                    |
| ------ | ------------ | ------------ | ------------------------------------- | ------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------- |
| **4**  | Orchestrator | Store        | **Command Register**                  | `saga-epic-store-command-register`                                                         | Envia comando para cadastrar a loja.                                                                              |
| **5a** | Store        | Orchestrator | **Event Success**                     | `saga-epic-store-event-success`                                                            | Retorna sucesso no cadastro da loja → Orchestrator marca a etapa *Store* como **CONCLUÍDA** e inicia *Financial*. |
| **5b** | Store        | Orchestrator | **Event Failed**                      | `saga-epic-store-event-failed`                                                             | Retorna falha no cadastro da loja → Orchestrator marca etapa e saga como **FALHA** e inicia compensações.         |
| **5c** | Orchestrator | Store        | **Command Compensate**                | `saga-epic-store-command-compensate`                                                       | Envia comando para desfazer o cadastro da loja (compensação).                                                     |
| **5d** | Store        | Orchestrator | **Event Compensation Success/Failed** | `saga-epic-store-event-compensation-success` / `saga-epic-store-event-compensation-failed` | Retorna resultado da compensação da *Store*.                                                                      |



| Etapa  | Origem       | Destino      | Tipo de mensagem                      | **Tópico**                                                                                         | Ação principal                                                                                 |
| ------ | ------------ | ------------ | ------------------------------------- | -------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| **6**  | Orchestrator | Financial    | **Command Register**                  | `saga-epic-financial-command-register`                                                             | Envia comando para criar a conta financeira do vendedor.                                       |
| **7a** | Financial    | Orchestrator | **Event Success**                     | `saga-epic-financial-event-success`                                                                | Retorna sucesso na criação da conta → Orchestrator marca saga como **FINALIZADA COM SUCESSO**. |
| **7b** | Financial    | Orchestrator | **Event Failed**                      | `saga-epic-financial-event-failed`                                                                 | Retorna falha → Orchestrator marca saga como **FALHA** e inicia compensações (Store e Seller). |
| **7c** | Orchestrator | Financial    | **Command Compensate**                | `saga-epic-financial-command-compensate`                                                           | Envia comando para desfazer a criação da conta financeira.                                     |
| **7d** | Financial    | Orchestrator | **Event Compensation Success/Failed** | `saga-epic-financial-event-compensation-success` / `saga-epic-financial-event-compensation-failed` | Retorna resultado da compensação financeira.                                                   |



| Serviço       | Comando de Registro                    | Evento de Sucesso                   | Evento de Falha                    | Comando de Compensação                   | Evento de Sucesso (Compensação)                  | Evento de Falha (Compensação)                   |
| ------------- | -------------------------------------- | ----------------------------------- | ---------------------------------- | ---------------------------------------- | ------------------------------------------------ | ----------------------------------------------- |
| **Seller**    | `saga-epic-seller-command-register`    | `saga-epic-seller-event-success`    | `saga-epic-seller-event-failed`    | `saga-epic-seller-command-compensate`    | `saga-epic-seller-event-compensation-success`    | `saga-epic-seller-event-compensation-failed`    |
| **Store**     | `saga-epic-store-command-register`     | `saga-epic-store-event-success`     | `saga-epic-store-event-failed`     | `saga-epic-store-command-compensate`     | `saga-epic-store-event-compensation-success`     | `saga-epic-store-event-compensation-failed`     |
| **Financial** | `saga-epic-financial-command-register` | `saga-epic-financial-event-success` | `saga-epic-financial-event-failed` | `saga-epic-financial-command-compensate` | `saga-epic-financial-event-compensation-success` | `saga-epic-financial-event-compensation-failed` |


| Etapa                          | Origem             | Destino      | Tipo de Mensagem       | Tópico                                                                                                                                 | Ação Principal                                                                                                                           |
| ------------------------------ | ------------------ | ------------ | ---------------------- | -------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| **1**                          | HTTP (API externa) | Orchestrator | —                      | —                                                                                                                                      | Recebe o payload de cadastro e cria o registro da saga com status `IN_PROGRESS`.                                                         |
| **2**                          | Orchestrator       | Seller       | Command Register       | `saga-epic-seller-command-register`                                                                                                    | Publica comando para o **Seller** iniciar o cadastro do vendedor.                                                                        |
| **3**                          | Seller             | Orchestrator | Event Success / Failed | `saga-epic-seller-event-success` / `saga-epic-seller-event-failed`                                                                     | Retorna o resultado do cadastro do vendedor.                                                                                             |
| **4 (sucesso)**                | Orchestrator       | —            | —                      | —                                                                                                                                      | Marca a etapa **Seller** como `COMPLETED`. Busca a próxima etapa (**Store**) e envia o comando de cadastro da loja.                      |
| **4 (falha)**                  | Orchestrator       | —            | —                      | —                                                                                                                                      | Marca a etapa **Seller** como `FAILED` e a **saga** como `FAILED`. Nenhuma compensação é necessária (primeira etapa).                    |
| **5**                          | Orchestrator       | Store        | Command Register       | `saga-epic-store-command-register`                                                                                                     | Publica comando para o **Store** iniciar o cadastro da loja.                                                                             |
| **6**                          | Store              | Orchestrator | Event Success / Failed | `saga-epic-store-event-success` / `saga-epic-store-event-failed`                                                                       | Retorna o resultado do cadastro da loja.                                                                                                 |
| **7 (sucesso)**                | Orchestrator       | Financial    | Command Register       | `saga-epic-financial-command-register`                                                                                                 | Marca a etapa **Store** como `COMPLETED`. Envia comando para o **Financial** criar a conta financeira.                                   |
| **7 (falha)**                  | Orchestrator       | —            | —                      | —                                                                                                                                      | Marca a etapa **Store** como `FAILED` e a **saga** como `FAILED`. Inicia compensação da etapa anterior (**Seller**).                     |
| **8 (compensação)**            | Orchestrator       | Seller       | Command Compensate     | `saga-epic-seller-command-compensate`                                                                                                  | Publica comando para o **Seller** desfazer o cadastro do vendedor.                                                                       |
| **9 (resultado compensação)**  | Seller             | Orchestrator | Event Success / Failed | `saga-epic-seller-event-success` / `saga-epic-seller-event-failed`                                                                     | Retorna o resultado da compensação. Atualiza a **saga** como `COMPENSATED` ou `COMPENSATION_FAILED`.                                     |
| **10**                         | Financial          | Orchestrator | Event Success / Failed | `saga-epic-financial-event-success` / `saga-epic-financial-event-failed`                                                               | Retorna o resultado da criação da conta financeira.                                                                                      |
| **11 (sucesso)**               | Orchestrator       | —            | —                      | —                                                                                                                                      | Marca a etapa **Financial** como `COMPLETED`. Atualiza a **saga** como `SUCCESS`.                                                        |
| **11 (falha)**                 | Orchestrator       | —            | —                      | —                                                                                                                                      | Marca a etapa **Financial** como `FAILED` e a **saga** como `FAILED`. Inicia compensação das etapas anteriores (**Store** e **Seller**). |
| **12 (compensação 1)**         | Orchestrator       | Store        | Command Compensate     | `saga-epic-store-command-compensate`                                                                                                   | Publica comando para o **Store** desfazer o cadastro da loja.                                                                            |
| **13 (compensação 2)**         | Orchestrator       | Seller       | Command Compensate     | `saga-epic-seller-command-compensate`                                                                                                  | Publica comando para o **Seller** desfazer o cadastro do vendedor.                                                                       |
| **14 (resultado compensação)** | Seller / Store     | Orchestrator | Event Success / Failed | `saga-epic-seller-event-success` / `saga-epic-seller-event-failed`<br>`saga-epic-store-event-success` / `saga-epic-store-event-failed` | Retorna o resultado das compensações. Atualiza a **saga** como `COMPENSATED` ou `COMPENSATION_FAILED`.                                   |


